{"remainingRequest":"/Users/lixin/iCloud Drive（归档）/Documents/code/个人学习代码/vue3.2/node_modules/thread-loader/dist/cjs.js!/Users/lixin/iCloud Drive（归档）/Documents/code/个人学习代码/vue3.2/node_modules/babel-loader/lib/index.js!/Users/lixin/iCloud Drive（归档）/Documents/code/个人学习代码/vue3.2/node_modules/ts-loader/index.js??ref--15-3!/Users/lixin/iCloud Drive（归档）/Documents/code/个人学习代码/vue3.2/node_modules/eslint-loader/index.js??ref--14-0!/Users/lixin/iCloud Drive（归档）/Documents/code/个人学习代码/vue3.2/src/api/request.ts","dependencies":[{"path":"/Users/lixin/iCloud Drive（归档）/Documents/code/个人学习代码/vue3.2/src/api/request.ts","mtime":1651656077000},{"path":"/Users/lixin/iCloud Drive（归档）/Documents/code/个人学习代码/vue3.2/babel.config.js","mtime":1651423044000},{"path":"/Users/lixin/iCloud Drive（归档）/Documents/code/个人学习代码/vue3.2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lixin/iCloud Drive（归档）/Documents/code/个人学习代码/vue3.2/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lixin/iCloud Drive（归档）/Documents/code/个人学习代码/vue3.2/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/lixin/iCloud Drive（归档）/Documents/code/个人学习代码/vue3.2/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/lixin/iCloud Drive（归档）/Documents/code/个人学习代码/vue3.2/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IudG8tc3RyaW5nLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgRWxNZXNzYWdlIH0gZnJvbSAnZWxlbWVudC1wbHVzJzsKaW1wb3J0IHsgZGlmZlRva2VuVGltZSB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKdmFyIHNlcnZpY2UgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEksCiAgdGltZW91dDogNTAwMAp9KTsgLy8gYXhpb3Por7fmsYLmi6bmiKrlmagKCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAvLyDmjqXlj6Por7fmsYLliY3vvIzliKTmlq3mmK/lkKbnmbvlvZXov4cKICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykpIHsKICAgIC8vIHRva2Vu5piv5ZCm5aSx5pWICiAgICBpZiAoZGlmZlRva2VuVGltZSgpKSB7CiAgICAgIC8vIOiiq+WKqOmAgOWHugogICAgICBzdG9yZS5kaXNwYXRjaCgnYXBwL2xvZ291dCcpOwogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCd0b2tlbiDlpLHmlYjkuoYnKSk7CiAgICB9CiAgfSAvLyDkuLrmr4/kuIDkuKror7fmsYLorr7nva50b2tlbgoKCiAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoZXJyb3IpKTsKfSk7IC8vIGF4aW9z5ZON5bqU5oum5oiq5ZmoCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgY29uc29sZS5sb2coJ3Jlc3BvbnNlJywgcmVzcG9uc2UpOyAvLyDlpITnkIblhazlhbHor7fmsYIKCiAgdmFyIF9yZXNwb25zZSRkYXRhID0gcmVzcG9uc2UuZGF0YSwKICAgICAgZGF0YSA9IF9yZXNwb25zZSRkYXRhLmRhdGEsCiAgICAgIG1ldGEgPSBfcmVzcG9uc2UkZGF0YS5tZXRhOwoKICBpZiAobWV0YS5zdGF0dXMgPT09IDIwMCB8fCBtZXRhLnN0YXR1cyA9PT0gMjAxKSB7CiAgICByZXR1cm4gZGF0YTsKICB9IGVsc2UgewogICAgRWxNZXNzYWdlLmVycm9yKG1ldGEubXNnKTsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IobWV0YS5tc2cpKTsKICB9Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlKTsKICBlcnJvci5yZXNwb25zZSAmJiBFbE1lc3NhZ2UuZXJyb3IoZXJyb3IucmVzcG9uc2UuZGF0YSk7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihlcnJvci5yZXNwb25zZS5kYXRhKSk7Cn0pOwpleHBvcnQgZGVmYXVsdCBzZXJ2aWNlOw=="},{"version":3,"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,SAASC,aAAT,QAA8B,cAA9B;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,IAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAN,CAAa;EAC3BC,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADM;EAE3BC,OAAO,EAAE;AAFkB,CAAb,CAAhB,C,CAKA;;AACAN,OAAO,CAACO,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACE,UAACC,MAAD,EAAW;EACT;EACA,IAAIC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAJ,EAAmC;IACjC;IACA,IAAId,aAAa,EAAjB,EAAqB;MACnB;MACAC,KAAK,CAACc,QAAN,CAAe,YAAf;MACA,OAAOC,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAU,WAAV,CAAf,CAAP;IACD;EACF,CATQ,CAUT;;;EACAN,MAAM,CAACO,OAAP,CAAeC,aAAf,GAA+BP,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA/B;EACA,OAAOF,MAAP;AACD,CAdH,EAeE,UAACS,KAAD,EAAU;EACR,OAAOL,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAUG,KAAV,CAAf,CAAP;AACD,CAjBH,E,CAoBA;;AACAnB,OAAO,CAACO,YAAR,CAAqBa,QAArB,CAA8BX,GAA9B,CACE,UAACW,QAAD,EAAa;EACXC,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBF,QAAxB,EADW,CAEX;;EACA,qBAAuBA,QAAQ,CAACG,IAAhC;EAAA,IAAQA,IAAR,kBAAQA,IAAR;EAAA,IAAcC,IAAd,kBAAcA,IAAd;;EACA,IAAIA,IAAI,CAACC,MAAL,KAAgB,GAAhB,IAAuBD,IAAI,CAACC,MAAL,KAAgB,GAA3C,EAAgD;IAC9C,OAAOF,IAAP;EACD,CAFD,MAEO;IACL1B,SAAS,CAACsB,KAAV,CAAgBK,IAAI,CAACE,GAArB;IACA,OAAOZ,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAUQ,IAAI,CAACE,GAAf,CAAf,CAAP;EACD;AACF,CAXH,EAYE,UAACP,KAAD,EAAU;EACRE,OAAO,CAACC,GAAR,CAAYH,KAAK,CAACC,QAAlB;EACAD,KAAK,CAACC,QAAN,IAAkBvB,SAAS,CAACsB,KAAV,CAAgBA,KAAK,CAACC,QAAN,CAAeG,IAA/B,CAAlB;EACA,OAAOT,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAUG,KAAK,CAACC,QAAN,CAAeG,IAAzB,CAAf,CAAP;AACD,CAhBH;AAkBA,eAAevB,OAAf","names":["axios","ElMessage","diffTokenTime","store","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","localStorage","getItem","dispatch","Promise","reject","Error","headers","Authorization","error","response","console","log","data","meta","status","msg"],"sourceRoot":"","sources":["/Users/lixin/iCloud Drive（归档）/Documents/code/个人学习代码/vue3.2/node_modules/eslint-loader/index.js??ref--14-0!/Users/lixin/iCloud Drive（归档）/Documents/code/个人学习代码/vue3.2/src/api/request.ts"],"sourcesContent":["import axios from 'axios'\nimport { ElMessage } from 'element-plus'\nimport { diffTokenTime } from '@/utils/auth'\nimport store from '@/store'\nconst service = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API,\n  timeout: 5000\n})\n\n// axios请求拦截器\nservice.interceptors.request.use(\n  (config) => {\n    // 接口请求前，判断是否登录过\n    if (localStorage.getItem('token')) {\n      // token是否失效\n      if (diffTokenTime()) {\n        // 被动退出\n        store.dispatch('app/logout')\n        return Promise.reject(new Error('token 失效了'))\n      }\n    }\n    // 为每一个请求设置token\n    config.headers.Authorization = localStorage.getItem('token')\n    return config\n  },\n  (error) => {\n    return Promise.reject(new Error(error))\n  }\n)\n\n// axios响应拦截器\nservice.interceptors.response.use(\n  (response) => {\n    console.log('response', response)\n    // 处理公共请求\n    const { data, meta } = response.data\n    if (meta.status === 200 || meta.status === 201) {\n      return data\n    } else {\n      ElMessage.error(meta.msg)\n      return Promise.reject(new Error(meta.msg))\n    }\n  },\n  (error) => {\n    console.log(error.response)\n    error.response && ElMessage.error(error.response.data)\n    return Promise.reject(new Error(error.response.data))\n  }\n)\nexport default service\n"]}]}